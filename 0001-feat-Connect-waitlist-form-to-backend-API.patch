From 486c104576030b2e6d0791c25b4be371d1a77c7a Mon Sep 17 00:00:00 2001
From: Ubuntu <ubuntu@ip-172-31-16-101.us-east-2.compute.internal>
Date: Thu, 1 Jan 2026 14:43:30 -0500
Subject: [PATCH] feat: Connect waitlist form to backend API
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

- Replace simulated success with real POST /waitlist call
- Show position number on success
- Handle API errors gracefully

ðŸ¤– Generated with Claude Code

Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>
---
 src/app/(auth)/signup/page.tsx | 26 +++++++++++++++++++++-----
 1 file changed, 21 insertions(+), 5 deletions(-)

diff --git a/src/app/(auth)/signup/page.tsx b/src/app/(auth)/signup/page.tsx
index 55208b9..db3a49a 100644
--- a/src/app/(auth)/signup/page.tsx
+++ b/src/app/(auth)/signup/page.tsx
@@ -4,11 +4,14 @@ import { useState } from 'react'
 import Link from 'next/link'
 import { Check } from 'lucide-react'
 
+const API_BASE = process.env.NEXT_PUBLIC_API_URL || 'https://api.gano.finance'
+
 export default function EarlyAccessPage() {
   const [email, setEmail] = useState('')
   const [loading, setLoading] = useState(false)
   const [submitted, setSubmitted] = useState(false)
   const [error, setError] = useState('')
+  const [position, setPosition] = useState<number | null>(null)
 
   const handleSubmit = async (e: React.FormEvent) => {
     e.preventDefault()
@@ -16,12 +19,24 @@ export default function EarlyAccessPage() {
     setError('')
 
     try {
-      // For now, just simulate success
-      // TODO: Connect to actual waitlist endpoint (e.g., /api/waitlist)
-      await new Promise(resolve => setTimeout(resolve, 800))
+      const response = await fetch(`${API_BASE}/waitlist`, {
+        method: 'POST',
+        headers: {
+          'Content-Type': 'application/json',
+        },
+        body: JSON.stringify({ email }),
+      })
+
+      const data = await response.json()
+
+      if (!response.ok) {
+        throw new Error(data.detail || 'Failed to join waitlist')
+      }
+
+      setPosition(data.position)
       setSubmitted(true)
-    } catch (err) {
-      setError('Something went wrong. Please try again.')
+    } catch (err: any) {
+      setError(err.message || 'Something went wrong. Please try again.')
     } finally {
       setLoading(false)
     }
@@ -36,6 +51,7 @@ export default function EarlyAccessPage() {
         <div className="space-y-2">
           <h1 className="text-2xl font-semibold text-primary">You&apos;re on the list</h1>
           <p className="text-secondary text-sm">
+            {position && `You&apos;re #${position}. `}
             We&apos;ll reach out when your access is ready.
           </p>
         </div>
-- 
2.43.0

